---
title: Chap4. 레스터화의 원리
date: 2025-01-24 14:30:00 +09:00
categories: [Graphics, HongLab]
published: false
tags:
  [cpp, class]
---

## **벡터와 포인트**
- 포인트(Point) : 위치를 표현
- 벡터(Vector) : 방향과 크기를 표현


### 포인트-벡터 연산

| 연산             | 결과   | 예시       |
|------------------|--------|------------|
| 포인트 - 포인트  | 벡터   | Q - P = v  |
| 포인트 +/- 벡터  | 포인트 | P + v = Q  |

### 직선의 표현
![alt text](/assets/img/그래픽스/chap4/image.png)

### 선분의 표현
![alt text](/assets/img/그래픽스/chap4/image-1.png)

### 동차좌표
![alt text](/assets/img/그래픽스/chap4/image-2.png)

---

## **레스터화가 빠른 이유**

### 레이트레이싱
![alt text](/assets/img/그래픽스/chap4/image-3.png)
- 레이 트레이싱에서는 각 픽셀마다 ray를 쏘고, 모든 물체와 충돌해야 하는지 검사해야하기 때문에 오버헤드가 크다.

### 레스터화
![alt text](/assets/img/그래픽스/chap4/image-4.png)
- 레스터화는 물체를 렌더링하고자 하는 화면위로 투영시켜 해당 픽셀의 색을 결정하기 때문에 레이트레이싱보다 빠르다.

![alt text](/assets/img/그래픽스/chap4/image-5.png)
- 해당 픽셀이 삼각형에 들어와있는지를 판단하여 픽셀의 색을 결정

![alt text](/assets/img/그래픽스/chap4/image-6.png)
- 픽셀의 색을 결정할 때 모든 픽셀에 대하여 검사하는 것이 아니라 정점영역을 감쌀수 있는 가장 작은 사각형을 찾아 해당 영역의 픽셀만 검사하여 최적화

---
## **삼각형 레스터화**
삼각형을 레스터화하여 화면에 표시하기

1. 가상 세계의 삼각형을 표시하고자 하는 화면위로 투영
2. 투영된 물체를 NDC좌표계로 변환
3. NDC좌표를 화면 좌표계로 변환
4. 변환된 위치에 따라 바운딩 박스를 계산
5. 픽셀이 삼각형안에 있는지 검사
6. 만약 삼각형 안에 있다면 무게중심 좌표계를 이용하여 해당 픽셀의 색을 결정

### NDC 좌표계
사용하는 모니터에 따라 종횡비가 달라질수 있는데, 해상도에 상관없이 렌더링을 수행하기 위해 NDC(Normalize Device Corrdinate)를 사용한다.

NDC 좌표계는 x,y,z가 [-1,1]의 범위를 가지는 좌표계로 clip space라고도 한다.

물체가 NDC좌표계에서 화면좌표계로 변환될때 모니터에 따라 종횡비를 곱해줘야 왜곡없이 표현되기 때문에, 투영된 물체를 NDC 좌표계로 변환하기 위해서는 종횡비의 역수를 취해서 곱해줘야 한다.

---
