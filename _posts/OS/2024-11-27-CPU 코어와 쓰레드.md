---
title: CPU 코어와 쓰레드
date: 2024-12-01 19:00:00 +09:00
categories: [OS, Thread]
math: true
mermaid: true
published: false
tags:
  [thread]
---

# CPU 코어와 쓰레드의 차이 및 관련 개념 정리


## 1. 코어(Core)와 쓰레드(Thread)의 차이
- **코어(Core)**란 물리적으로 독립된 연산 유닛으로, 진정한 병렬 처리가 가능한 단위를 의미한다.
  - 예: 8코어 CPU는 동시에 8개의 작업을 병렬로 처리할 수 있다.
  
- **쓰레드(Thread)**란 논리적 실행 단위로, 하이퍼스레딩(Hyper-Threading)이나 SMT(Simultaneous Multithreading) 기술을 통해 물리 코어가 두 개의 작업 흐름을 처리할 수 있는 것처럼 동작하게 한다.
  - 예: 8코어 16쓰레드 CPU는 물리적으로 8개의 코어가 있지만, 동시에 16개의 작업 흐름을 처리할 수 있는 것처럼 동작한다.

---

## 2. 멀티쓰레드 프로그램의 코어와 쓰레드 사용
- 멀티쓰레드 프로그램은 여러 소프트웨어 쓰레드를 생성하여 병렬 작업을 수행한다.
- 소프트웨어 쓰레드는 운영 체제의 스케줄러에 의해 물리 코어와 논리 쓰레드에 배정된다.
- 예:
  - CPU가 8코어 16쓰레드라면, 멀티쓰레드 프로그램은 최대 16개의 소프트웨어 쓰레드를 동시에 실행할 수 있다.
  - 소프트웨어 쓰레드가 20개라면, 16개의 쓰레드가 실행되고 나머지 4개는 대기 상태가 된다.

---

## 3. 논리 쓰레드(Logical Thread)의 의미
- 논리 쓰레드는 하이퍼스레딩 기술로 만들어진 가상화된 처리 단위이다.
- 물리 코어 하나가 자원을 공유하여 두 개의 논리 쓰레드를 처리할 수 있다.
- 물리 코어는 논리 쓰레드 각각에 전용 레지스터 세트를 제공하여 상태를 유지한다.
- 논리 쓰레드는 실제로 물리 자원을 공유하기 때문에 진정한 병렬 처리가 아니라 **효율적인 자원 활용**을 위한 기술이다.

---

## 4. 하이퍼스레딩의 동작 방식
- 한 코어에 배정된 두 논리 쓰레드는 물리 코어의 연산 자원(ALU, FPU 등)을 공유한다.
- 한 쓰레드가 메모리 대기 상태에 있으면, 다른 쓰레드가 그 자원을 사용하여 실행된다.
- 같은 물리 자원을 동시에 요청하면 병목 현상이 발생할 수 있다.
- 하이퍼스레딩은 실제 상태 저장/복원이 필요하지 않아 **콘텍스트 스위칭보다 오버헤드가 적다**.

---

## 5. 한 코어에 배정되는 논리 쓰레드
- 일반적으로 소비자용 CPU에서는 한 코어당 2개의 논리 쓰레드가 배정된다.
- 물리 자원의 한계(연산 장치, 캐시 등) 때문에 논리 쓰레드 수를 무작정 늘리면 성능 저하가 발생할 수 있다.
- 논리 쓰레드의 수는 물리 코어 설계와 자원 활용의 균형을 고려한 최적화 결과이다.

---

## 6. 한 코어에 서로 다른 프로세스의 쓰레드가 배정될 수 있는가?
- 운영 체제는 쓰레드 단위로 스케줄링을 수행하기 때문에, 한 물리 코어의 두 논리 쓰레드에 서로 다른 프로세스의 쓰레드가 배정될 수 있다.
- 이런 경우 두 논리 쓰레드는 같은 코어의 자원을 공유하며 실행된다.

---

## 7. CPU 스펙에서 쓰레드의 의미
- CPU 스펙에서 쓰레드는 **"동시에 실행 가능한 논리적 작업 흐름의 개수"**를 나타낸다.
- 예: 8코어 16쓰레드 CPU는 동시에 16개의 작업 흐름을 실행할 수 있다.
- 쓰레드의 개수는 CPU의 병렬 처리 능력과 스케줄링 효율성을 간접적으로 나타낸다.

---

## 8. 쓰레드 개수가 많으면 성능이 항상 좋아지는가?
- 논리 쓰레드가 많아지면 물리 자원의 경합이 심화되어 병목 현상이 발생할 수 있다.
- 예:
  - 논리 쓰레드가 2개인 코어는 적절한 병렬 처리와 자원 활용의 균형을 유지할 수 있다.
  - 논리 쓰레드가 4개 이상으로 늘어나면 자원 경합과 캐시 오버로드로 인해 성능 저하가 발생할 수 있다.
- 따라서 논리 쓰레드의 개수는 CPU 설계에서 **최적화된 수준**으로 설정된다.

---

## 9. 결론
- CPU 성능을 나타낼 때 쓰레드는 **"동시에 실행 가능한 논리적 작업 흐름의 개수"**를 의미한다.
- 쓰레드 개수는 코어의 자원 활용 효율과 병렬 처리 성능을 설명하는 지표로 중요하다.
- 하지만 쓰레드 수만으로 CPU 성능이 결정되지는 않으며, 물리 코어의 설계와 자원 공유 방식이 성능에 큰 영향을 미친다.
